# ç”µç«èµ›äº‹æ¨¡æ‹Ÿç³»ç»Ÿ - å‰åç«¯å¯¹æ¥å·¥ä½œè®¡åˆ’

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å‰åç«¯å¯¹æ¥çš„å®Œæ•´å·¥ä½œè®¡åˆ’ï¼ŒåŒ…æ‹¬APIå®ç°ä¼˜å…ˆçº§ã€æ•°æ®ç»“æ„å¯¹é½ã€æµ‹è¯•æ–¹æ¡ˆå’Œéƒ¨ç½²ç­–ç•¥ã€‚

**ç¼–åˆ¶æ—¶é—´**: 2025å¹´10æœˆ11æ—¥
**é¡¹ç›®çŠ¶æ€**: å‰ç«¯å¼€å‘å®Œæˆï¼Œåç«¯æ ¸å¿ƒåŠŸèƒ½å·²å®ç°ï¼Œå‡†å¤‡å¼€å§‹å¯¹æ¥
**é¢„è®¡å·¥æœŸ**: 3-5ä¸ªå·¥ä½œæ—¥

---

## ğŸ¯ å¯¹æ¥ç›®æ ‡

### æ ¸å¿ƒç›®æ ‡
1. âœ… å®ç°å‰ç«¯æ‰€éœ€çš„å…¨éƒ¨APIæ¥å£
2. âœ… ç¡®ä¿æ•°æ®æ ¼å¼å®Œå…¨å…¼å®¹
3. âœ… å»ºç«‹ç¨³å®šçš„å‰åç«¯é€šä¿¡æœºåˆ¶
4. âœ… å®Œæˆç«¯åˆ°ç«¯åŠŸèƒ½æµ‹è¯•
5. âœ… ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ

### è´¨é‡æ ‡å‡†
- APIå“åº”æ—¶é—´ < 500ms
- æ¥å£æˆåŠŸç‡ > 99%
- æ•°æ®ä¸€è‡´æ€§ 100%
- é”™è¯¯å¤„ç†è¦†ç›–ç‡ 100%

---

## ğŸ“Š å½“å‰çŠ¶æ€è¯„ä¼°

### åç«¯å·²å®Œæˆï¼ˆç¬¬äºŒé˜¶æ®µï¼‰
- âœ… æ•°æ®åº“è®¾è®¡ä¸åˆå§‹åŒ–
- âœ… æ ¸å¿ƒä¸šåŠ¡æœåŠ¡ï¼ˆTeam, Competition, Matchï¼‰
- âœ… èµ›ç¨‹ç”Ÿæˆå¼•æ“ï¼ˆCompetitionEngineï¼‰
- âœ… ç§¯åˆ†è®¡ç®—å¼•æ“ï¼ˆScoringEngineï¼‰
- âœ… åŸºç¡€APIæ¥å£æ¡†æ¶
- âœ… å•å…ƒæµ‹è¯•ï¼ˆ45ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡ï¼‰

### å‰ç«¯å·²å®Œæˆï¼ˆç¬¬ä¸ƒé˜¶æ®µï¼‰
- âœ… æˆ˜é˜Ÿç®¡ç†ç•Œé¢
- âœ… èµ›åŒºç®¡ç†ç•Œé¢
- âœ… èµ›ç¨‹ç®¡ç†ç•Œé¢
- âœ… ç§¯åˆ†æ’åç³»ç»Ÿ
- âœ… è£èª‰æ®¿å ‚ç³»ç»Ÿ
- âœ… ç³»ç»Ÿè®¾ç½®æ¨¡å—
- âœ… å®Œæ•´çš„APIæ¥å£æ–‡æ¡£

### å¾…å¯¹æ¥æ¨¡å—
- âŒ ç§¯åˆ†æ’åAPIï¼ˆæ ¸å¿ƒï¼‰
- âŒ è£èª‰æ®¿å ‚APIï¼ˆæ ¸å¿ƒï¼‰
- âŒ èµ›ç¨‹æ¨¡æ‹ŸåŠŸèƒ½å®Œå–„
- âŒ å®æ—¶æ•°æ®æ›´æ–°æœºåˆ¶
- âŒ CORSé…ç½®
- âŒ é”™è¯¯å¤„ç†ç»Ÿä¸€

---

## ğŸ”§ æŠ€æœ¯æ ˆå¯¹é½

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Vue 3.4+ + TypeScript 5.0+
- **UIåº“**: Element Plus 2.4+
- **çŠ¶æ€ç®¡ç†**: Pinia 2.1+
- **HTTPå®¢æˆ·ç«¯**: Axios
- **å¼€å‘æœåŠ¡å™¨**: Vite (ç«¯å£: 5173)

### åç«¯æŠ€æœ¯æ ˆ
- **è¿è¡Œæ—¶**: Node.js 18+ + TypeScript 5.0+
- **æ¡†æ¶**: Express.js 4.x
- **æ•°æ®åº“**: PostgreSQL 14+
- **ç¼“å­˜**: Redis 7+
- **å¼€å‘æœåŠ¡å™¨**: ç«¯å£ 3000 (å»ºè®®æ”¹ä¸º 8080)

### é€šä¿¡åè®®
- **åè®®**: HTTP/HTTPS + JSON
- **CORS**: å…è®¸ http://localhost:5173
- **è®¤è¯**: æš‚æ— ï¼ˆåç»­å¯æ·»åŠ JWTï¼‰
- **å®æ—¶é€šä¿¡**: WebSocketï¼ˆå¯é€‰ï¼ŒåæœŸæ·»åŠ ï¼‰

---

## ğŸ“ APIå¯¹æ¥æ¸…å•

### ç¬¬ä¸€ä¼˜å…ˆçº§ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

#### 1. æˆ˜é˜Ÿç®¡ç†API âœ… (å·²å®ç°)
```typescript
GET    /api/teams                    // è·å–æˆ˜é˜Ÿåˆ—è¡¨
GET    /api/teams/:id                // è·å–æˆ˜é˜Ÿè¯¦æƒ…
POST   /api/teams                    // åˆ›å»ºæˆ˜é˜Ÿ
PUT    /api/teams/:id                // æ›´æ–°æˆ˜é˜Ÿ
DELETE /api/teams/:id                // åˆ é™¤æˆ˜é˜Ÿ
GET    /api/teams/:id/statistics     // è·å–æˆ˜é˜Ÿç»Ÿè®¡
```

#### 2. èµ›åŒºç®¡ç†API âœ… (å·²å®ç°)
```typescript
GET    /api/regions                  // è·å–èµ›åŒºåˆ—è¡¨
GET    /api/regions/:id              // è·å–èµ›åŒºè¯¦æƒ…
GET    /api/regions/:id/teams        // è·å–èµ›åŒºæˆ˜é˜Ÿ
```

#### 3. èµ›å­£ç®¡ç†API âœ… (å·²å®ç°)
```typescript
GET    /api/seasons                  // è·å–èµ›å­£åˆ—è¡¨
GET    /api/seasons/:id              // è·å–èµ›å­£è¯¦æƒ…
POST   /api/seasons                  // åˆ›å»ºèµ›å­£
GET    /api/seasons/:id/competitions // è·å–èµ›å­£èµ›äº‹
```

#### 4. èµ›äº‹ç®¡ç†API âš ï¸ (éƒ¨åˆ†å®ç°)
```typescript
GET    /api/competitions             // è·å–èµ›äº‹åˆ—è¡¨
GET    /api/competitions/:id         // è·å–èµ›äº‹è¯¦æƒ…
POST   /api/competitions             // åˆ›å»ºèµ›äº‹
POST   /api/competitions/:id/generate-matches // ç”Ÿæˆå¯¹é˜µ
GET    /api/competitions/:id/standings        // è·å–ç§¯åˆ†æ¦œ âŒ å¾…å®ç°
```

#### 5. æ¯”èµ›ç®¡ç†API âš ï¸ (éƒ¨åˆ†å®ç°)
```typescript
GET    /api/matches                  // è·å–æ¯”èµ›åˆ—è¡¨
GET    /api/matches/:id              // è·å–æ¯”èµ›è¯¦æƒ…
POST   /api/matches/:id/simulate     // æ¨¡æ‹Ÿæ¯”èµ›
PUT    /api/matches/:id/result       // æ›´æ–°æ¯”èµ›ç»“æœ
```

### ç¬¬äºŒä¼˜å…ˆçº§ï¼ˆç§¯åˆ†æ’åï¼‰âŒ å¾…å®ç°

#### 6. ç§¯åˆ†æ’åAPI
```typescript
GET    /api/rankings/regional        // è·å–èµ›åŒºå¸¸è§„èµ›ç§¯åˆ†æ¦œ
  ?regionId=1&seasonId=1&type=spring

GET    /api/rankings/annual          // è·å–å¹´åº¦ç§¯åˆ†æ’å
  ?seasonId=1

POST   /api/rankings/regional/update // æ›´æ–°èµ›åŒºç§¯åˆ†æ¦œ
POST   /api/rankings/annual/update   // æ›´æ–°å¹´åº¦ç§¯åˆ†æ’å
POST   /api/rankings/refresh         // åˆ·æ–°æ‰€æœ‰æ’å
```

### ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼ˆè£èª‰æ®¿å ‚ï¼‰âŒ å¾…å®ç°

#### 7. è£èª‰æ®¿å ‚API
```typescript
GET    /api/honor-hall/seasons                    // è·å–å¯ç”¨èµ›å­£
GET    /api/honor-hall/seasons/:id/honors         // è·å–èµ›å­£è£èª‰æ•°æ®
GET    /api/honor-hall/regional-honors            // è·å–èµ›åŒºè£èª‰
GET    /api/honor-hall/global-honors              // è·å–å…¨çƒèµ›äº‹è£èª‰
GET    /api/honor-hall/annual-rankings            // è·å–å¹´åº¦ç§¯åˆ†æ’å
```

---

## ğŸ—‚ï¸ æ•°æ®ç»“æ„å¯¹é½

### 1. ç»Ÿä¸€å“åº”æ ¼å¼

**æˆåŠŸå“åº”:**
```typescript
interface ApiResponse<T> {
  success: true
  data: T
  message: string
}
```

**é”™è¯¯å“åº”:**
```typescript
interface ApiErrorResponse {
  success: false
  data: null
  message: string
  errors?: string[]
}
```

**åˆ†é¡µå“åº”:**
```typescript
interface PaginatedResponse<T> {
  data: T[]
  total: number
  page: number
  limit: number
  totalPages: number
}
```

### 2. æ ¸å¿ƒæ•°æ®ç»“æ„

#### Team (æˆ˜é˜Ÿ)
```typescript
interface Team {
  id: string
  name: string
  regionId: string
  strength: number        // 0-100
  createdAt?: string
  statistics?: {
    totalMatches: number
    wins: number
    losses: number
    winRate: number       // 0-1
    totalPoints: number
    seasonPoints: number
    intercontinentalPoints: number
  }
}
```

#### Competition (èµ›äº‹)
```typescript
interface Competition {
  id: string
  name: string
  type: 'spring' | 'summer' | 'msi' | 'worlds' | 'intercontinental'
  format: 'regular_season' | 'playoffs' | 'double_elimination' | 'swiss'
  seasonId: string
  status: 'planned' | 'ongoing' | 'completed'
  teams: Team[]
  matches?: Match[]
  stages?: CompetitionStage[]
}
```

#### Match (æ¯”èµ›)
```typescript
interface Match {
  id: string
  competitionId: string
  homeTeamId: string
  awayTeamId: string
  round: number
  stage: string
  status: 'scheduled' | 'ongoing' | 'completed'
  regionId: string
  result?: {
    homeScore: number     // 0-2
    awayScore: number     // 0-2
    homePoints: number    // 0-3
    awayPoints: number    // 0-3
    winner?: string
  }
  scheduledAt?: string
  playedAt?: string
}
```

#### RegionalStanding (èµ›åŒºç§¯åˆ†æ¦œ)
```typescript
interface RegularSeasonStanding {
  teamId: string
  teamName: string
  regionId: string
  regionName: string
  matchesPlayed: number
  wins: number
  losses: number
  winRate: number          // ç™¾åˆ†æ¯”ï¼Œå¦‚ 83.33
  regularSeasonPoints: number
  roundDifferential: number // å°åœºåˆ†å·®
  position: number         // æ’å
  lastUpdated: string
}
```

#### AnnualRanking (å¹´åº¦ç§¯åˆ†æ’å)
```typescript
interface AnnualTeamRanking {
  teamId: string
  teamName: string
  regionId: string
  regionName: string
  totalPoints: number      // æ€»ç§¯åˆ†ï¼ˆä¸åŒ…å«æ´²é™…èµ›ï¼‰
  springPoints: number
  summerPoints: number
  playoffPoints: number
  msiPoints: number
  worldsPoints: number
  intercontinentalPoints: number // ä»…å±•ç¤ºï¼Œä¸è®¡å…¥æ€»åˆ†
  achievements: string[]
  position: number
  seasonId: string
}
```

---

## ğŸ”„ ç§¯åˆ†è®¡ç®—è§„åˆ™

### å¸¸è§„èµ›ç§¯åˆ†
| æ¯”èµ›ç»“æœ | ç§¯åˆ† |
|---------|------|
| 2:0 è·èƒœ | 3åˆ† |
| 2:1 è·èƒœ | 2åˆ† |
| 1:2 å¤±è´¥ | 1åˆ† |
| 0:2 å¤±è´¥ | 0åˆ† |

### å­£åèµ›ç§¯åˆ†
| åæ¬¡ | ç§¯åˆ† |
|------|------|
| å† å†› | 50åˆ† |
| äºšå†› | 35åˆ† |
| åŠå†³èµ› | 25åˆ† |
| å››åˆ†ä¹‹ä¸€ | 15åˆ† |

### MSIç§¯åˆ†
| åæ¬¡ | ç§¯åˆ† |
|------|------|
| å† å†› | 100åˆ† |
| äºšå†› | 80åˆ† |
| åŠå†³èµ› | 60åˆ† |
| å°ç»„èµ› | 20åˆ† |

### ä¸–ç•Œèµ›ç§¯åˆ†
| åæ¬¡ | ç§¯åˆ† |
|------|------|
| å† å†› | 150åˆ† |
| äºšå†› | 120åˆ† |
| åŠå†³èµ› | 90åˆ† |
| å››åˆ†ä¹‹ä¸€ | 60åˆ† |
| å°ç»„èµ› | 30åˆ† |

### æ´²é™…èµ›ç§¯åˆ†
âš ï¸ **é‡è¦**: æ´²é™…èµ›ç§¯åˆ†**ä¸è®¡å…¥å¹´åº¦æ€»ç§¯åˆ†**ï¼Œä»…ä½œä¸ºè£èª‰å±•ç¤º

---

## ğŸš€ å¼€å‘å®æ–½è®¡åˆ’

### é˜¶æ®µä¸€ï¼šç¯å¢ƒé…ç½®ä¸åŸºç¡€å¯¹æ¥ï¼ˆ0.5å¤©ï¼‰

**ä»»åŠ¡æ¸…å•:**
- [x] é…ç½®CORSå…è®¸å‰ç«¯è®¿é—®
- [x] ç»Ÿä¸€APIå“åº”æ ¼å¼
- [x] ä¿®æ”¹åç«¯ç«¯å£ä¸º8080
- [x] é…ç½®ç¯å¢ƒå˜é‡
- [x] æµ‹è¯•åŸºç¡€è¿é€šæ€§

**éªŒæ”¶æ ‡å‡†:**
- å‰ç«¯å¯ä»¥æˆåŠŸè°ƒç”¨åç«¯API
- å“åº”æ ¼å¼ç¬¦åˆçº¦å®š
- æ— CORSé”™è¯¯

### é˜¶æ®µäºŒï¼šæ ¸å¿ƒAPIå®Œå–„ï¼ˆ1å¤©ï¼‰

**ä»»åŠ¡æ¸…å•:**
- [ ] å®Œå–„æˆ˜é˜Ÿç®¡ç†API
- [ ] å®Œå–„èµ›äº‹ç®¡ç†API
- [ ] å®Œå–„æ¯”èµ›ç®¡ç†API
- [ ] æ·»åŠ ç§¯åˆ†æ¦œæŸ¥è¯¢æ¥å£
- [ ] æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½

**éªŒæ”¶æ ‡å‡†:**
- æˆ˜é˜Ÿåˆ—è¡¨ã€è¯¦æƒ…æ­£å¸¸æ˜¾ç¤º
- èµ›äº‹åˆ›å»ºã€æŸ¥è¯¢æ­£å¸¸
- æ¯”èµ›æ¨¡æ‹ŸåŠŸèƒ½æ­£å¸¸

### é˜¶æ®µä¸‰ï¼šç§¯åˆ†æ’åç³»ç»Ÿå¯¹æ¥ï¼ˆ1.5å¤©ï¼‰

**ä»»åŠ¡æ¸…å•:**
- [ ] åˆ›å»ºRankingService
- [ ] å®ç°èµ›åŒºç§¯åˆ†æ¦œè®¡ç®—
- [ ] å®ç°å¹´åº¦ç§¯åˆ†æ’åè®¡ç®—
- [ ] åˆ›å»ºæ’åAPIæ¥å£
- [ ] é›†æˆåˆ°æ¯”èµ›ç»“æœæ›´æ–°æµç¨‹
- [ ] å‰åç«¯è”è°ƒæµ‹è¯•

**éªŒæ”¶æ ‡å‡†:**
- èµ›åŒºç§¯åˆ†æ¦œæ­£ç¡®æ˜¾ç¤º
- å¹´åº¦ç§¯åˆ†æ’åæ­£ç¡®è®¡ç®—
- æ¯”èµ›ç»“æŸåç§¯åˆ†è‡ªåŠ¨æ›´æ–°

### é˜¶æ®µå››ï¼šè£èª‰æ®¿å ‚ç³»ç»Ÿå¯¹æ¥ï¼ˆ1å¤©ï¼‰

**ä»»åŠ¡æ¸…å•:**
- [ ] åˆ›å»ºHonorHallService
- [ ] å®ç°èµ›å­£è£èª‰æ•°æ®è®¡ç®—
- [ ] å®ç°è£èª‰è®°å½•å­˜å‚¨
- [ ] åˆ›å»ºè£èª‰æ®¿å ‚API
- [ ] å‰åç«¯è”è°ƒæµ‹è¯•

**éªŒæ”¶æ ‡å‡†:**
- è£èª‰æ®¿å ‚æ­£ç¡®æ˜¾ç¤ºå„èµ›äº‹å† äºšå­£å†›
- å¹´åº¦ç§¯åˆ†å‰ä¸‰æ­£ç¡®è®¡ç®—
- æ´²é™…èµ›è£èª‰æ­£ç¡®æ ‡è¯†

### é˜¶æ®µäº”ï¼šåŠŸèƒ½ä¼˜åŒ–ä¸Bugä¿®å¤ï¼ˆ1å¤©ï¼‰

**ä»»åŠ¡æ¸…å•:**
- [ ] ä¿®å¤å‰ç«¯UI Bugï¼ˆèµ›ç¨‹ç®¡ç†äº”åœºæ¯”èµ›æ˜¾ç¤ºï¼‰
- [ ] ä¼˜åŒ–APIå“åº”é€Ÿåº¦
- [ ] æ·»åŠ æ•°æ®ç¼“å­˜æœºåˆ¶
- [ ] å®Œå–„é”™è¯¯å¤„ç†
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•

**éªŒæ”¶æ ‡å‡†:**
- æ‰€æœ‰å·²çŸ¥Bugä¿®å¤å®Œæˆ
- APIå“åº”æ—¶é—´ < 500ms
- é”™è¯¯æç¤ºå‹å¥½æ˜ç¡®

---

## ğŸ§ª æµ‹è¯•æ–¹æ¡ˆ

### 1. å•å…ƒæµ‹è¯•
- ç§¯åˆ†è®¡ç®—é€»è¾‘æµ‹è¯•
- æ’åç®—æ³•æµ‹è¯•
- æ•°æ®éªŒè¯æµ‹è¯•

### 2. é›†æˆæµ‹è¯•
- APIæ¥å£æµ‹è¯•
- æ•°æ®åº“æ“ä½œæµ‹è¯•
- ç¼“å­˜æœºåˆ¶æµ‹è¯•

### 3. ç«¯åˆ°ç«¯æµ‹è¯•
- å®Œæ•´èµ›å­£æµç¨‹æµ‹è¯•
- æ¯”èµ›æ¨¡æ‹Ÿæµ‹è¯•
- ç§¯åˆ†æ›´æ–°æµ‹è¯•

### 4. æ€§èƒ½æµ‹è¯•
- å¹¶å‘è¯·æ±‚æµ‹è¯•
- å¤§æ•°æ®é‡æŸ¥è¯¢æµ‹è¯•
- ç¼“å­˜å‘½ä¸­ç‡æµ‹è¯•

---

## ğŸ“‚ æ–‡ä»¶ç»“æ„è§„åˆ’

### åç«¯æ–°å¢æ–‡ä»¶
```
backend/src/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ RankingService.ts      # ç§¯åˆ†æ’åæœåŠ¡ âŒ å¾…åˆ›å»º
â”‚   â””â”€â”€ HonorHallService.ts    # è£èª‰æ®¿å ‚æœåŠ¡ âŒ å¾…åˆ›å»º
â”œâ”€â”€ repositories/
â”‚   â”œâ”€â”€ RankingRepository.ts   # æ’åæ•°æ®è®¿é—® âŒ å¾…åˆ›å»º
â”‚   â””â”€â”€ HonorRepository.ts     # è£èª‰æ•°æ®è®¿é—® âŒ å¾…åˆ›å»º
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ RankingController.ts   # æ’åæ§åˆ¶å™¨ âŒ å¾…åˆ›å»º
â”‚   â””â”€â”€ HonorHallController.ts # è£èª‰æ§åˆ¶å™¨ âŒ å¾…åˆ›å»º
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ rankings.ts            # æ’åè·¯ç”± âŒ å¾…åˆ›å»º
â”‚   â””â”€â”€ honorHall.ts           # è£èª‰è·¯ç”± âŒ å¾…åˆ›å»º
â””â”€â”€ middlewares/
    â”œâ”€â”€ cors.ts                # CORSé…ç½® âŒ å¾…åˆ›å»º
    â””â”€â”€ responseFormatter.ts   # å“åº”æ ¼å¼åŒ– âŒ å¾…åˆ›å»º
```

### æ•°æ®åº“æ–°å¢è¡¨
```sql
-- èµ›åŒºç§¯åˆ†æ¦œè¡¨
CREATE TABLE regional_standings (
  id VARCHAR(50) PRIMARY KEY,
  team_id VARCHAR(50) NOT NULL,
  region_id VARCHAR(50) NOT NULL,
  season_id VARCHAR(50) NOT NULL,
  competition_type ENUM('spring', 'summer'),
  matches_played INT DEFAULT 0,
  wins INT DEFAULT 0,
  losses INT DEFAULT 0,
  win_rate DECIMAL(5,2),
  regular_season_points INT DEFAULT 0,
  round_differential INT DEFAULT 0,
  position INT,
  last_updated TIMESTAMP,

  INDEX idx_region_season (region_id, season_id, competition_type)
);

-- å¹´åº¦ç§¯åˆ†æ’åè¡¨
CREATE TABLE annual_rankings (
  id VARCHAR(50) PRIMARY KEY,
  team_id VARCHAR(50) NOT NULL,
  season_id VARCHAR(50) NOT NULL,
  total_points INT DEFAULT 0,
  spring_points INT DEFAULT 0,
  summer_points INT DEFAULT 0,
  playoff_points INT DEFAULT 0,
  msi_points INT DEFAULT 0,
  worlds_points INT DEFAULT 0,
  intercontinental_points INT DEFAULT 0,
  achievements JSON,
  position INT,
  last_updated TIMESTAMP,

  UNIQUE KEY uk_team_season (team_id, season_id)
);

-- è£èª‰è®°å½•è¡¨
CREATE TABLE honor_records (
  id VARCHAR(50) PRIMARY KEY,
  season_id VARCHAR(50) NOT NULL,
  competition_id VARCHAR(50) NOT NULL,
  team_id VARCHAR(50) NOT NULL,
  position INT NOT NULL,  -- 1:å† å†›, 2:äºšå†›, 3:å­£å†›
  points INT DEFAULT 0,
  achievement_date TIMESTAMP,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

## ğŸ” å…³é”®æŠ€æœ¯ç‚¹

### 1. CORSé…ç½®
```typescript
// src/middlewares/cors.ts
import cors from 'cors'

export const corsOptions = {
  origin: process.env.NODE_ENV === 'production'
    ? 'https://your-frontend-domain.com'
    : 'http://localhost:5173',
  credentials: true,
  optionsSuccessStatus: 200
}
```

### 2. å“åº”æ ¼å¼åŒ–ä¸­é—´ä»¶
```typescript
// src/middlewares/responseFormatter.ts
export const formatResponse = (data: any, message = 'æ“ä½œæˆåŠŸ') => {
  return {
    success: true,
    data,
    message
  }
}

export const formatError = (message: string, errors?: string[]) => {
  return {
    success: false,
    data: null,
    message,
    errors
  }
}
```

### 3. ç§¯åˆ†è®¡ç®—æ ¸å¿ƒé€»è¾‘
```typescript
// src/services/RankingService.ts
export class RankingService {
  // è®¡ç®—å¸¸è§„èµ›ç§¯åˆ†
  calculateRegularPoints(homeScore: number, awayScore: number): {
    homePoints: number
    awayPoints: number
  } {
    if (homeScore === 2 && awayScore === 0) return { homePoints: 3, awayPoints: 0 }
    if (homeScore === 2 && awayScore === 1) return { homePoints: 2, awayPoints: 1 }
    if (homeScore === 1 && awayScore === 2) return { homePoints: 1, awayPoints: 2 }
    if (homeScore === 0 && awayScore === 2) return { homePoints: 0, awayPoints: 3 }
    return { homePoints: 0, awayPoints: 0 }
  }

  // è®¡ç®—å­£åèµ›ç§¯åˆ†
  calculatePlayoffPoints(position: number): number {
    const pointsMap = { 1: 50, 2: 35, 3: 25, 4: 25, 5: 15, 6: 15, 7: 15, 8: 15 }
    return pointsMap[position] || 0
  }

  // æ›´æ–°èµ›åŒºç§¯åˆ†æ¦œ
  async updateRegionalStandings(regionId: string, seasonId: string, type: 'spring' | 'summer') {
    // å®ç°é€»è¾‘
  }
}
```

---

## ğŸ“Š è¿›åº¦è¿½è¸ª

### å¼€å‘è¿›åº¦çœ‹æ¿

| æ¨¡å— | ä¼˜å…ˆçº§ | çŠ¶æ€ | è´Ÿè´£äºº | é¢„è®¡å®Œæˆ | å®é™…å®Œæˆ |
|------|--------|------|--------|----------|----------|
| CORSé…ç½® | P0 | â³ è¿›è¡Œä¸­ | - | Day 1 | - |
| å“åº”æ ¼å¼ç»Ÿä¸€ | P0 | â³ è¿›è¡Œä¸­ | - | Day 1 | - |
| æˆ˜é˜ŸAPIå®Œå–„ | P0 | ğŸ“‹ å¾…å¼€å§‹ | - | Day 1 | - |
| èµ›äº‹APIå®Œå–„ | P0 | ğŸ“‹ å¾…å¼€å§‹ | - | Day 2 | - |
| ç§¯åˆ†æ’åAPI | P1 | ğŸ“‹ å¾…å¼€å§‹ | - | Day 3 | - |
| è£èª‰æ®¿å ‚API | P2 | ğŸ“‹ å¾…å¼€å§‹ | - | Day 4 | - |
| Bugä¿®å¤ | P1 | ğŸ“‹ å¾…å¼€å§‹ | - | Day 5 | - |
| ç«¯åˆ°ç«¯æµ‹è¯• | P1 | ğŸ“‹ å¾…å¼€å§‹ | - | Day 5 | - |

### é‡Œç¨‹ç¢‘

- **Day 1**: âœ… åŸºç¡€å¯¹æ¥å®Œæˆï¼Œå‰ç«¯å¯è®¿é—®åç«¯
- **Day 2**: âœ… æ ¸å¿ƒåŠŸèƒ½å¯¹æ¥å®Œæˆ
- **Day 3**: âœ… ç§¯åˆ†æ’åç³»ç»Ÿä¸Šçº¿
- **Day 4**: âœ… è£èª‰æ®¿å ‚ç³»ç»Ÿä¸Šçº¿
- **Day 5**: âœ… å…¨éƒ¨åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼Œç³»ç»Ÿå¯ä¸Šçº¿

---

## ğŸš¨ é£é™©é¢„è­¦

### æŠ€æœ¯é£é™©
1. **æ•°æ®åº“æ€§èƒ½** - å¤§é‡æ•°æ®æŸ¥è¯¢å¯èƒ½å½±å“å“åº”é€Ÿåº¦
   - **ç¼“è§£æªæ–½**: ä½¿ç”¨Redisç¼“å­˜ï¼Œä¼˜åŒ–SQLæŸ¥è¯¢

2. **å¹¶å‘å†²çª** - å¤šä¸ªæ¯”èµ›åŒæ—¶æ›´æ–°ç§¯åˆ†å¯èƒ½å†²çª
   - **ç¼“è§£æªæ–½**: ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ï¼Œæ·»åŠ ä¹è§‚é”

3. **å‰åç«¯æ•°æ®ä¸ä¸€è‡´** - Mockæ•°æ®ä¸å®é™…æ•°æ®ç»“æ„å·®å¼‚
   - **ç¼“è§£æªæ–½**: ä¸¥æ ¼æŒ‰ç…§æ¥å£æ–‡æ¡£å¼€å‘ï¼Œå……åˆ†æµ‹è¯•

### è¿›åº¦é£é™©
1. **éœ€æ±‚å˜æ›´** - ç”²æ–¹å¯èƒ½æå‡ºæ–°éœ€æ±‚
   - **ç¼“è§£æªæ–½**: æ§åˆ¶å˜æ›´èŒƒå›´ï¼Œä¼˜å…ˆå®Œæˆæ ¸å¿ƒåŠŸèƒ½

2. **æŠ€æœ¯éš¾ç‚¹** - å¤æ‚ç§¯åˆ†è®¡ç®—é€»è¾‘å¯èƒ½è€—æ—¶
   - **ç¼“è§£æªæ–½**: æå‰è®¾è®¡ç®—æ³•ï¼Œç¼–å†™å•å…ƒæµ‹è¯•

---

## ğŸ“ åä½œæœºåˆ¶

### æ²Ÿé€šæ–¹å¼
- **æ—¥å¸¸æ²Ÿé€š**: é¡¹ç›®ç¾¤ / é‚®ä»¶
- **æŠ€æœ¯è®¨è®º**: ä»£ç Review / æŠ€æœ¯æ–‡æ¡£
- **é—®é¢˜åé¦ˆ**: Issueè·Ÿè¸ªç³»ç»Ÿ

### ä»£ç è§„èŒƒ
- **æäº¤è§„èŒƒ**: feat/fix/docs/refactor
- **åˆ†æ”¯ç­–ç•¥**: feature/* â†’ dev â†’ main
- **ä»£ç å®¡æŸ¥**: æ‰€æœ‰ä»£ç éœ€ç»è¿‡Review

### æ–‡æ¡£ç»´æŠ¤
- **APIæ–‡æ¡£**: ä¿æŒä¸ä»£ç åŒæ­¥æ›´æ–°
- **æ•°æ®åº“æ–‡æ¡£**: è®°å½•æ‰€æœ‰è¡¨ç»“æ„å˜æ›´
- **æ¥å£å˜æ›´æ—¥å¿—**: è®°å½•ç ´åæ€§å˜æ›´

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] æ‰€æœ‰å‰ç«¯é¡µé¢å¯æ­£å¸¸è®¿é—®åç«¯æ•°æ®
- [ ] æˆ˜é˜Ÿã€èµ›äº‹ã€æ¯”èµ›CRUDåŠŸèƒ½æ­£å¸¸
- [ ] æ¯”èµ›æ¨¡æ‹Ÿåç§¯åˆ†æ­£ç¡®æ›´æ–°
- [ ] èµ›åŒºç§¯åˆ†æ¦œæ­£ç¡®æ˜¾ç¤º
- [ ] å¹´åº¦ç§¯åˆ†æ’åæ­£ç¡®è®¡ç®—
- [ ] è£èª‰æ®¿å ‚æ•°æ®æ­£ç¡®å±•ç¤º
- [ ] æ´²é™…èµ›ç§¯åˆ†æ­£ç¡®æ ‡è¯†ï¼ˆä¸è®¡å…¥æ€»åˆ†ï¼‰

### æ€§èƒ½éªŒæ”¶
- [ ] APIå¹³å‡å“åº”æ—¶é—´ < 500ms
- [ ] å¹¶å‘100ç”¨æˆ·ç³»ç»Ÿç¨³å®š
- [ ] æ•°æ®æŸ¥è¯¢æ— æ˜æ˜¾å¡é¡¿

### è´¨é‡éªŒæ”¶
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] é›†æˆæµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] æ— é«˜å±Bug
- [ ] ä»£ç é€šè¿‡ESLintæ£€æŸ¥

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

1. **å‰ç«¯æ¥å£æ–‡æ¡£**: `/å‰ç«¯è¿‡æ¥/åç«¯æ¥å£æ–‡æ¡£.md`
2. **æ¸¸æˆé€»è¾‘æ–‡æ¡£**: `/å‰ç«¯è¿‡æ¥/æ¸¸æˆé€»è¾‘.md`
3. **åç«¯ç¬¬äºŒé˜¶æ®µæŠ¥å‘Š**: `/backend/ç¬¬äºŒé˜¶æ®µå·¥ä½œæŠ¥å‘Š.md`
4. **å‰ç«¯ç¬¬å…­é˜¶æ®µæŠ¥å‘Š**: `/å‰ç«¯è¿‡æ¥/ç¬¬å…­é˜¶æ®µå·¥ä½œæŠ¥å‘Š.md` (ç§¯åˆ†æ’å)
5. **å‰ç«¯ç¬¬äº”é˜¶æ®µæŠ¥å‘Š**: `/å‰ç«¯è¿‡æ¥/ç¬¬äº”é˜¶æ®µå·¥ä½œæŠ¥å‘Š.md` (è£èª‰æ®¿å ‚)

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¼€å§‹çš„ä»»åŠ¡
1. âœ… åˆ›å»ºæœ¬å·¥ä½œè®¡åˆ’æ–‡æ¡£
2. â³ é…ç½®CORSä¸­é—´ä»¶
3. â³ ç»Ÿä¸€å“åº”æ ¼å¼
4. â³ åˆ›å»ºRankingServiceå’ŒHonorHallService
5. â³ å®ç°ç§¯åˆ†è®¡ç®—æ ¸å¿ƒé€»è¾‘

### æœ¬å‘¨ç›®æ ‡
- å®Œæˆé˜¶æ®µä¸€ã€äºŒã€ä¸‰
- ç§¯åˆ†æ’åç³»ç»Ÿå…¨é¢ä¸Šçº¿
- å‰ç«¯å¯æ­£å¸¸æŸ¥çœ‹ç§¯åˆ†æ¦œå’Œæ’å

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ11æ—¥
**çŠ¶æ€**: ğŸ“‹ å·¥ä½œè®¡åˆ’å·²åˆ¶å®šï¼Œå‡†å¤‡å¼€å§‹å®æ–½
